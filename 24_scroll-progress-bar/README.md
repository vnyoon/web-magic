# CSSä¸€æ­¥æ­¥åˆ¶ä½œå…¨å±æ»šåŠ¨è¿›åº¦æ¡æŒ‡ç¤ºå™¨

ä¸‹é¢æœ¬æ–‡å°†è¯¦ç»†ä»‹ç»æ€ä¹ˆä»…ä½¿ç”¨`CSS`åˆ¶ä½œ**ç½‘é¡µæ»šåŠ¨è¿›åº¦æ¡æŒ‡ç¤ºå™¨**çš„å®ç°æ–¹æ³•ã€‚åœ¨æœ¬æ¡ˆä¾‹ç½‘é¡µä¸­ä½ å°†çœ‹åˆ°å¯¼èˆªåŒºæ˜¯ä¸€ä¸ª**åŒ…å«ä¸åŒé¢œè‰²èŠ‚åŒºçš„è¿›åº¦æ¡æŒ‡ç¤ºå™¨**ã€‚æ¥ç€ï¼Œå½“ç”¨æˆ·æ»šåŠ¨é¡µé¢ä¹Ÿå°±æ˜¯æµè§ˆå†…å®¹åŒºåŸŸæ—¶ï¼Œå¯¼èˆªè¿›åº¦æ¡ä¼š**æ ¹æ®æ»šåŠ¨ä½ç½®æ˜¾ç¤ºç›¸åº”çš„é¢œè‰²**ï¼Œä»¥æ˜¾ç¤ºç”¨æˆ·æ­¤æ—¶åœ¨é¡µé¢ä¸­çš„ä½ç½®åŒºåŸŸã€‚æ€»çš„æ¥è¯´è¿™ä¸ªç½‘é¡µå°†å±•ç¤ºä¸€ä¸ªè¿›åº¦æ¡æŒ‡ç¤ºå™¨ä»¥åŠä¸€äº›å®ƒçš„åé¦ˆä¸äº¤äº’å¼åŠŸèƒ½ï¼Œå¯¹ä¸åŒå†…å®¹åŒºåŸŸéƒ¨åˆ†çš„è¿…é€Ÿè®¿é—®å¯¼èˆªğŸ›¬ã€‚[showtime](https://code.juejin.cn/pen/7301226965518778419)ï¼

<p align=center>
<img
  src="./images/progress-bar-preview.gif" 
  alt="progress-bar-preview"
  width="60%"
/>
</p>

**<p align=center>æ»šåŠ¨è¿›åº¦æ¡æŒ‡ç¤ºå™¨ç›®å‰ä»…é€‚ç”¨äºChromeã€Edgeã€Operaæµè§ˆå™¨ï¼ğŸ˜¶</p>**

## ç›¸å…³å±æ€§
ç®€å•ä»‹ç»æœ¬æ¡ˆä¾‹ä¸­ä¸»è¦ä½¿ç”¨åˆ°çš„`CSS`å±æ€§ï¼Œå…·ä½“ä»‹ç»å’Œè¯¦ç»†ç”¨æ³•å¯ä»¥ç‚¹å‡»åˆ°`MDN`æŸ¥çœ‹ï¼š

### [animation-timeline](https://developer.mozilla.org/en-US/docs/Web/CSS/animation-timeline#browser_compatibility)
æŒ‡å®šç”¨äºæ§åˆ¶CSSåŠ¨ç”»è¿›åº¦çš„æ—¶é—´è½´ã€‚è¡¨ç¤ºåŠ¨ç”»çš„æ—¶é—´è½´ã€‚

`scroll()`CSSå‡½æ•°åœ¨è¿™é‡Œä¸€èµ·ä½¿ç”¨ï¼Œæ˜¯æŒ‡å½“ä¼ å…¥ä¸€ä¸ªå¯æ»šåŠ¨çš„å…ƒç´ åï¼Œæ»šåŠ¨æ¡å°†ä¸ºå½“å‰å…ƒç´ (æœ¬æ¡ˆä¾‹æ˜¯`nav::before`)æä¾›æ»šåŠ¨è¿›åº¦æ—¶é—´çº¿ã€‚

#### å…¼å®¹æ€§
æˆªæ­¢ç›®å‰(23/11/16)ï¼Œè¯¥APIä»…åœ¨`Chrome`ã€`Edge`ã€`Opera`æµè§ˆå™¨ä¸­æœ‰æ•ˆï¼Œå½“ç„¶æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![caniuse](./images/scroll-browser-compatibility.png)

### [linear-gradient()](https://developer.mozilla.org/zh-CN/docs/Web/CSS/gradient/linear-gradient)
åˆ›å»ºä¸€ä¸ªè¡¨ç¤ºä¸¤ç§æˆ–å¤šç§é¢œè‰²çº¿æ€§æ¸å˜çš„å›¾åƒã€‚å‡½æ•°éœ€è¦è‡³å°‘ä¼ å…¥ä¸¤ç§é¢œè‰²ï¼Œå½“ç„¶è¿˜å¯ä»¥å®ç°ä¸åŒæ–¹å‘(è§’åº¦)çš„æ¸å˜æ•ˆæœã€‚å¦‚æœä¸æŒ‡å®šæ–¹å‘ï¼Œé»˜è®¤ä»ä¸Šåˆ°ä¸‹æ¸å˜ã€‚

<img
  src="./images/progress-bar-linear-gradient.png" 
  alt="linear-gradient"
  width="80%"
/>

#### å‚è€ƒæ–‡ç« 
* [CSSé€‰æ‹©å™¨åˆ›å»ºä»å¹³å‡¡åˆ°ç«‹ä½“çš„3Dç‹¬ç‰¹è§†è§‰æ•ˆæœ](https://juejin.cn/post/7293789904482615335)
* [CSSè½»æ¾å®ç°ç»ç’ƒæ‹Ÿæ€è´¨æ„Ÿçš„å¡ç‰‡ä¸:has()é€‰æ‹©å™¨](https://juejin.cn/post/7290017749714092072)
* [ã€Œä¸­ç§‹å…ƒç´ ç›¸å†Œã€3Dè§†è§‰ç”»å»Šå±•ç¤ºæ—‹è½¬æ’­æ”¾èµ°é©¬ç¯](https://juejin.cn/post/7279720035735830580)

## æ„å»º HTML
é¦–å…ˆï¼Œåœ¨`HTML`ä¸­ï¼Œæ•´ä½“è€Œè¨€æ„å»ºäº†ä¸€ä¸ªç®€å•çš„ç½‘é¡µç»“æ„ï¼ŒåŒ…å«å¯¼èˆª(`.nav`)ã€å†…å®¹åŒºåŸŸ(`.container`)çš„å„ä¸ªç« èŠ‚(`.section`)å’Œä¸€äº›æç¤ºä¿¡æ¯(`.wraning`ã€`.hint`)ã€‚
* å¯¼èˆªéƒ¨åˆ†é‡Œçš„é”šç‚¹é“¾æ¥æ·»åŠ `href`å±æ€§æ˜¯æŸä¸ªå…ƒç´ çš„`id`å€¼æ—¶ï¼Œå½“ç‚¹å‡»è¿™ä¸ªé“¾æ¥åä¼šæ ¹æ®å…ƒç´ è®¾ç½®çš„`id`ï¼Œé¡µé¢æ»šåŠ¨åˆ°æŒ‡å®šå…ƒç´ çš„ä½ç½®ï¼Œæ³¨æ„ä¸è¦å†™é”™ã€‚
* æ¯ä¸ªç« èŠ‚ä½¿ç”¨äº†è‡ªå®šä¹‰çš„æ ·å¼å˜é‡`--bg-colr`æ¥æŒ‡å®šä¸åŒçš„èƒŒæ™¯é¢œè‰²ã€‚
* ç½‘é¡µåº•éƒ¨ä¸å³ä¾§ä¼šå›ºå®šå±•ç¤ºä¸€ä¸ªè­¦å‘Šä¿¡æ¯å’Œä¸€äº›å›¾æ ‡æç¤ºä¿¡æ¯ã€‚
```html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Scroll Progress Bar</title>

  <link rel="stylesheet" href="//at.alicdn.com/t/c/font_4329990_f694ra4vq6.css">
  <link rel="stylesheet" href="./css/index.css">
</head>

<body>
  <nav>
    <a href="#html">HTML</a>
    <a href="#css">CSS</a>
    <a href="#js">JavaScript</a>
    <a href="#vue">Vue</a>
    <a href="#react">React</a>
  </nav>

  <div class="container">
    <div class="section" id="html" style="--bg-colr: #4b7eff">
      <h2>HTML</h2>
      <p>Hyper Text Markup Language</p>
    </div>
  
    <div class="section" id="css" style="--bg-colr: #ff6464">
      <h2>CSS</h2>
      <p>Cascading Style Sheets</p>
    </div>
  
    <div class="section" id="js" style="--bg-colr: #ffd966">
      <h2>JavaScript</h2>
      <p>Client-Side Scripting Language</p>
    </div>
  
    <div class="section" id="vue" style="--bg-colr: #42b883">
      <h2>Vue</h2>
      <p>Building UI On The Web</p>
    </div>
  
    <div class="section" id="react" style="--bg-colr: #8e67cd">
      <h2>React</h2>
      <p>Building Web And Native Interface</p>
    </div>
  </div>

  <div class="warning">Progerss Bar Only Works On Chrome, Edge, Opera, etc</div>

  <div class="hint">
    <i class="iconfont icon-v-up"></i>
    <i class="iconfont icon-vertical-rounded"></i>
    <i class="iconfont icon-mouse"></i>
    <i class="iconfont icon-vertical-rounded"></i>
    <i class="iconfont icon-v-down"></i>
  </div>
</body>

</html>
```

## æ·»åŠ  CSS
æ¥ä¸‹æ¥ï¼Œçœ‹`CSS`éƒ¨åˆ†å¯¹äºé»˜è®¤æ ·å¼çš„é‡ç½®ã€‚å®šä¹‰äº†ä¸€äº›é¢œè‰²CSSå˜é‡æ–¹ä¾¿æ›´æ”¹ã€‚å¹¶ä¸”å½“æ–‡æ¡£æ»šåŠ¨æ—¶ï¼Œæ»šåŠ¨è¡Œä¸ºè®¾ç½®ä¸º`smooth`å¹³ç¨³çš„æ»šåŠ¨ï¼Œä½¿é”šç‚¹è·³è½¬æ—¶çš„æ»šåŠ¨ä¹Ÿæ›´æµç•…ã€‚
```css
/* @import url('https://fonts.googleapis.com/css2?family=Ubuntu:wght@300;400;500;700&display=swap'); */
@import './google-fonts.css';

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

html {
  --primary-colr: #fff;

  --h-colr: #4b7eff;
  --c-colr: #ff6464;
  --j-colr: #ffd966;
  --v-colr: #42b883;
  --r-colr: #8e67cd;

  scroll-behavior: smooth;
}

a {
  text-decoration: none;
  color: var(--primary-colr);
}

body {
  font-family: 'Ubuntu', sans-serif;
}

/* ... */
```
ä¸‹é¢å°±æ¥ä¸€æ­¥æ­¥å¤„ç†å…¶å®ƒä¸»è¦å…ƒç´ çš„æ ·å¼ã€‚ä½¿ç”¨äº†ä¼ªå…ƒç´ æ¥åˆ›å»ºè¿›åº¦æ¡ï¼Œé€šè¿‡è®¾ç½®çš„ä¼ªå…ƒç´ çš„å®½åº¦å’ŒèƒŒæ™¯è‰²ï¼Œä»¥åŠä½¿ç”¨åŠ¨ç”»æ¥æ§åˆ¶è¿›åº¦æ¡çš„å˜åŒ–ï¼Œå®ç°äº†æ»šåŠ¨è¿›åº¦æ¡çš„æ•ˆæœï¼š
1. é¦–å…ˆï¼Œå¯¹äºå¯¼èˆªéƒ¨åˆ†`.nav`å…ƒç´ å®šä½å›ºå®šåœ¨é¡¶éƒ¨ã€‚
  * æ¯ä¸ª`a`å…ƒç´ éƒ½è®¾ç½®å·¦å³ä¸‹è¾¹æ¡†ï¼Œæ›´èƒ½æ˜ç¡®å½“å‰æµè§ˆåˆ°å“ªä¸ªåŒºåŸŸã€‚å¹¶ä¸”é€šè¿‡ä¼ªç±»é€‰æ‹©å™¨é€‰ä¸­ç¬¬`2~5`ä¸ªaå…ƒç´ ï¼Œå½“é¼ æ ‡æ‚¬æµ®æ—¶è®¾ç½®èƒŒæ™¯è‰²(ç¬¬1ä¸ªä¼šä½¿ç”¨æ¸å˜èƒŒæ™¯è®¾ç½®)ã€‚
  * ä½¿ç”¨`::before`ä¼ªå…ƒç´ åˆ›å»ºæ°´å¹³æ–¹å‘çš„æ¸å˜èƒŒæ™¯ã€‚å…¶ä¸­`90deg`å°±æ˜¯`to right`ã€‚æ ¹æ®ä¸åŒçš„å˜é‡å®šä¹‰ï¼Œåˆ†ä¸ºä¸åŒçš„è‰²æ®µï¼Œç›´åˆ°æœ€ç»ˆå®½åº¦è¾¾åˆ°`100vw`ã€‚
  ```css
  /*... */
  nav {
    position: fixed;

    width: 100vw;
    height: 50px;
    line-height: 50px;
    background-color: #343434;

    display: flex;
    align-items: center;
  }

  nav a {
    flex: 1;

    font-size: 1.4rem;
    text-align: center;
    border: 2px solid #000;
    border-top-width: 0;
    border-bottom-width: 4px;
    transition: background-color 0.5s;
  }
  nav a:first-child {
    border-left-width: 0;
  }

  nav::before {
    content: "";
    position: absolute;
    z-index: -1;

    width: 20vw;
    height: 100%;
    background: linear-gradient(
      90deg, 
      var(--h-colr) 0 20vw, 
      var(--c-colr) 0 40vw, 
      var(--j-colr) 0 60vw, 
      var(--v-colr) 0 80vw, 
      var(--r-colr) 0 100vw
    );
  }

  nav a:nth-child(2):hover {
    background-color: var(--c-colr);
  }
  nav a:nth-child(3):hover {
    background-color: var(--j-colr);
  }
  nav a:nth-child(4):hover {
    background-color: var(--v-colr);
  }
  nav a:nth-child(5):hover {
    background-color: var(--r-colr);
  }
  ```
  <img
    src="./images/progress-bar-rendering1.png" 
    alt="progress-bar-rendering"
    width="80%"
  />

2. å…¶æ¬¡ï¼Œå¯¹äºå†…å®¹éƒ¨åˆ†`.section`æ ¹æ®è‡ªå®šä¹‰å˜é‡è®¾ç½®ä¸åŒèƒŒæ™¯è‰²å’Œä¸€å®šé«˜åº¦`100vh`ã€‚
3. æ¥ç€ï¼Œä¸ºäº†è®©åŠ¨ç”»ä½“ç°å‡ºæ¥ï¼Œç»™`::before`æ·»åŠ å…³é”®å¸§åŠ¨ç”»ä»¥åŠæ»šåŠ¨è¿›åº¦æ—¶é—´çº¿åï¼Œå®ç°æ»šåŠ¨æ¸å˜èƒŒæ™¯æ•ˆæœã€‚
4. ç„¶åï¼Œå°±æ˜¯æŠŠä¸€äº›å‘ŠçŸ¥æµè§ˆè€…çš„**é¢å¤–è¯´æ˜å’ŒæŒ‡å¯¼**(`.warning`ã€`.hint`)å…ƒç´ çš„æ ·å¼å†™ä¸€ä¸‹ï¼Œå®šä½åœ¨ä¸é®æŒ¡å®é™…å†…å®¹åˆèƒ½æ³¨æ„åˆ°çš„åœ°æ–¹å°±è¡Œäº†ã€‚
```css
nav::before {
  /* ... */
  animation: scrollProgress linear;
  animation-timeline: scroll(root);
}
@keyframes scrollProgress {
  100% {
    width: 100vw;
  }
}

div.section {
  height: 100vh;
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  background-color: var(--bg-colr);
  border-bottom: 3px solid #000;
  color: var(--primary-colr);
  font-size: 3.5rem;  
}
.section p {
  font-size: 1.25rem;
}

.warning {
  position: fixed;
  bottom: 0;

  width: 100%;
  text-align: center;
  color: var(--primary-colr);
  font-size: 1.25rem;
  padding: 20px 0;
}
.warning::before {
  content: "*";
  position: absolute;
  color: #f00;
  transform: translateX(-10px);
}

.hint {
  position: fixed;
  top: 50%;
  right: 20px;
  transform: translateY(-50%);

  display: flex;
  flex-direction: column;
}
.hint i {
  font-size: 3rem;
  color: var(--primary-colr);
}
.hint::after {
  content: "Scroll";
  position: absolute;
  right: 3rem;
  top: 50%;
  transform: translateY(-50%);
  font-size: 1.5rem;
  color: var(--primary-colr);
}



@media screen and (max-width: 768px) {
  html {
    font-size: 12px;
  }

  .hint::after {
    content: "";
  }
}

@media screen and (max-width: 576px) {
  html {
    font-size: 10px;
  }
}

```

## æœ€å
æœ¬æ–‡çš„å®ç°æ–¹æ³•ç®€æ´æ˜äº†ï¼Œé€šè¿‡`HTML`å’Œ`CSS`çš„ç»“åˆï¼Œå®ç°äº†ä¸€ä¸ªç®€å•è€Œå®ç”¨çš„**æ»šåŠ¨è¿›åº¦æ¡æŒ‡ç¤ºå™¨**æ•ˆæœï¼Œå¹¶è®©ç½‘é¡µå…·æœ‰æ»šåŠ¨è¿›åº¦æ¡å’Œäº¤äº’å¯¼èˆªåŠŸèƒ½ã€‚åŒæ—¶ï¼Œä½¿ç”¨äº†`@media`æŸ¥è¯¢æ¥ä½¿é¡µé¢åœ¨ä¸åŒå±å¹•å°ºå¯¸ä¸‹æœ‰ä¸åŒçš„å­—ä½“å¤§å°ï¼Œæé«˜é¡µé¢çš„å¯è¯»æ€§å’Œé€‚é…æ€§ã€‚

ä½ ä¹Ÿå¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œè°ƒæ•´ï¼Œè¿›ä¸€æ­¥æ”¹å–„å’Œæ‰©å±•è¿™ä¸ªæ•ˆæœã€‚å¸Œæœ›è¿™ç¯‡æ–‡ç« å¯¹ä½ åœ¨å¼€å‘ç±»ä¼¼äº¤äº’åŠ¨ç”»æ•ˆæœæ—¶æœ‰æ‰€å¸®åŠ©ï¼å¦‚æœä½ å¯¹è¿™ä¸ªæ¡ˆåˆ—è¿˜æœ‰ä»»ä½•é—®é¢˜ï¼Œæ¬¢è¿åœ¨è¯„è®ºåŒºç•™è¨€æˆ–è”ç³»(ç§ä¿¡)æˆ‘ã€‚ç å­—ä¸æ˜“ğŸ¥²ï¼Œä¸è¦å¿˜äº†ä¸‰è¿é¼“åŠ±ğŸ¤Ÿï¼Œè°¢è°¢é˜…è¯»ï¼ŒHappy CodingğŸ‰ï¼

æºç æˆ‘æ”¾åœ¨äº†[GitHub](https://github.com/vnyoon/web-magic)ï¼Œé‡Œé¢è¿˜æœ‰ä¸€äº›é…·ç‚«çš„æ•ˆæœã€åŠ¨ç”»æ¡ˆåˆ—ï¼Œå–œæ¬¢çš„è¯ä¸è¦å¿˜äº† `starred` ä¸è¿·è·¯ï¼
